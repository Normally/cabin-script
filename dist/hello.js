/*! withcabin.com 0.5.6 */
!async function(e,t,n){n="{"===n[0]?"ping.withcabin.com":n;const a=e.navigator;if(a.userAgent.search(/(bot|spider|crawl)/gi)>-1)return;const i=e=>{const t=new XMLHttpRequest;return new Promise((n,a)=>{t.onreadystatechange=()=>{4===t.readyState&&n(parseFloat(t.response))},t.open("GET",e),t.send()})},o="disableCabin",r="addEventListener",s="pushState",c="sendBeacon",d="timing",h=e.location,p=e.performance,u=e.screen,l="https://"+n,f=()=>Date.now(),v=()=>E+=f()-g,w=e=>Object.keys(e).map(t=>`${t}=${encodeURIComponent(e[t])}`).join("&"),y=(e,t)=>{if(!a[c])return i(`${e}?${w(t)}`);a[c](e,JSON.stringify(t))};let m,g,E,b;const S=async()=>{if(e[o])return void delete e[o];delete e[o],m=f(),g=m,E=0;let n=p&&p[d]?p[d].domContentLoadedEventEnd-p[d].navigationStart:0;b={r:t.referrer,w:u.width,s:0,t:n>0?n:0,p:h.href};let a=h.hostname,r=h.pathname;await Promise.all([i(l+"/cache?"+a).then(e=>{b.u=e}),i(l+"/cache?"+a+r).then(e=>{b.up=e})]),i(l+"/hello?"+w(b))};t[r]("visibilitychange",()=>{t.hidden?v():g=f()});const $=async()=>{e[o]||(!t.hidden&&v(),await y(l+"/duration",{d:E,n:m,p:h.href}))};e[r]("beforeunload",$);e.history[s]=function(t){let n=history[t];return function(){let a,i=n.apply(this,arguments);return"function"==typeof Event?a=new Event(t):(a=doc.createEvent("Event"),a.initEvent(t,!0,!0)),a.arguments=arguments,e.dispatchEvent(a),i}}(s),e[r](s,()=>{$(),S()}),e[r]("popstate",()=>{$(),S()}),e.cabin={async event(e,t){v();const n={e:e,p:h.href,d:E,n:m};await y(l+"/event",n),t&&t()}},S()}(window,document,"{{.Host}}");