/*! Cabin - privacy-first analytics | withcabin.com | v0.5.4 */
!async function(e,t,n){n=-1==n.indexOf("{")?n:"ping.withcabin.com";let i=e.navigator;if(i.userAgent.search(/(bot|spider|crawl)/gi)>-1)return;const a=e=>{const t=new XMLHttpRequest;return new Promise((n,i)=>{t.onreadystatechange=()=>{4===t.readyState&&n(parseFloat(t.response))},t.open("GET",e),t.send()})};let o="disableCabin",r=e.location,s=e.performance,d=e.screen;const c=`https://${n}`,h=()=>Date.now(),p=()=>f+=h()-v,u=e=>Object.keys(e).map(t=>`${t}=${encodeURIComponent(e[t])}`).join("&"),l=(e,t)=>{if(!i.sendBeacon)return a(`${e}?${u(t)}`);i.sendBeacon(e,JSON.stringify(t))};let y,v,f,E;const g=async()=>{if(e[o])return void delete e[o];delete e[o],y=h(),v=y,f=0;let n=[...s.getEntriesByType("resource"),...s.getEntriesByType("navigation")],i=0;n.forEach(e=>{i+=e.decodedBodySize?e.decodedBodySize:0});let p=s&&s.timing?s.timing.domContentLoadedEventEnd-s.timing.navigationStart:0;E={r:t.referrer,w:d.width,s:i,t:p>0?p:0,p:r.href};let l=r.hostname,g=r.pathname;await Promise.all([a(`${c}/cache?${l}`).then(e=>{E.u=e}),a(`${c}/cache?${l+g}`).then(e=>{E.up=e})]),a(`${c}/hello?${u(E)}`)};t.addEventListener("visibilitychange",()=>{t.hidden?p():v=h()});const m=async()=>{e[o]||(!t.hidden&&p(),await l(`${c}/duration`,{d:f,n:y,p:r.href}))};e.addEventListener("beforeunload",m);e.history.pushState=function(t){let n=history[t];return function(){let i,a=n.apply(this,arguments);return"function"==typeof Event?i=new Event(t):(i=doc.createEvent("Event"),i.initEvent(t,!0,!0)),i.arguments=arguments,e.dispatchEvent(i),a}}("pushState"),e.addEventListener("pushState",()=>{m(),g()}),e.addEventListener("popstate",()=>{m(),g()}),e.cabin={async event(e,t){p();const n={e:e,p:r.href,d:f,n:y};await l(`${c}/event`,n),t&&t()}},g()}(window,document,"{{.Host}}");